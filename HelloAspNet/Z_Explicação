1. Linha:   var builder = WebApplication.CreateBuilder(args);

Essa linha cria o construtor da aplicação web.
No ASP.NET Core, toda aplicação começa criando um objeto do tipo WebApplicationBuilder.

Esse objeto é responsável por configurar o ambiente da aplicação. Ele define o servidor web (Kestrel), o sistema de logs e outras opções iniciais.
O parâmetro args serve para capturar argumentos de linha de comando, caso a aplicação precise deles.

Em resumo, essa linha inicializa toda a base necessária para que o servidor funcione.

2. Linha:   var app = builder.Build();

Após a configuração inicial, é necessário montar o aplicativo em si.
O método Build() transforma o builder em um objeto do tipo WebApplication.

O objeto app é o núcleo da aplicação.
É com ele que definimos as rotas, controlamos as requisições HTTP e iniciamos o servidor.
A partir deste ponto, a aplicação está pronta para receber e responder requisições.

3. Linha:   app.MapGet("/", () => { ... });

O método MapGet é usado para definir uma rota do tipo GET.
A rota GET é a mais comum e é utilizada quando alguém acessa uma página pelo navegador.

O primeiro parâmetro ("/") indica o caminho da URL.
Aqui, o caractere / representa a raiz do site, ou seja, a página inicial.

O segundo parâmetro é uma função (usando expressão lambda) que será executada quando essa rota for acessada.
Dentro dessa função, nós podemos escrever qualquer código que desejamos que seja executado ao abrir a página.

Em resumo, essa linha define o que o servidor deve fazer quando o usuário acessa o endereço principal do site.


string html = @"
    <html>
        <head>
            <title>Meu primeiro ASP.NET</title>
        </head>
        <body style='font-family: Arial; text-align: center; margin-top: 50px;'>
            <h1 style='color: blue;'>Hello, World!</h1>
            <p>Este e meu primeiro teste com ASP.NET Core </p>
        </body>
    </html>";


Nesse trecho, é criada uma variável chamada html, que armazena o conteúdo da página que será exibida no navegador.

O símbolo @ antes das aspas indica que a string pode ser escrita em várias linhas, mantendo as quebras de linha e espaços exatamente como estão.
Isso é muito útil para escrever códigos HTML diretamente dentro do C#.

Esse código HTML será retornado ao navegador quando a rota for acessada.
Ele define o título da página e um corpo simples com o texto "Hello, World!" em azul.


5. Linha:   return Results.Content(html, "text/html");

Essa linha envia a resposta para o navegador.

O método Results.Content() cria uma resposta HTTP personalizada.
O primeiro parâmetro (html) é o conteúdo que será retornado.
O segundo parâmetro ("text/html") define o tipo do conteúdo, informando ao navegador que o texto é um documento HTML e não apenas texto simples.

Assim, o navegador renderiza o HTML corretamente, exibindo a página formatada.

Em resumo, essa linha é responsável por enviar o HTML da página como resposta para o usuário.

6. Linha:   app.Run();

Essa é a linha final do programa e serve para iniciar o servidor web.

Quando o método Run() é chamado, o ASP.NET Core começa a escutar as requisições HTTP nas portas padrão (geralmente 5000 e 5001).
A aplicação permanece ativa até que seja interrompida manualmente (geralmente pressionando Ctrl + C no terminal).

Enquanto o servidor estiver rodando, ele responderá a todas as requisições de acordo com as rotas definidas anteriormente.

Em resumo, app.Run() coloca o site no ar.


...............................................


Fluxo geral do programa : 

CreateBuilder   configura o servidor e os serviços básicos.

Build   monta a aplicação pronta para uso.

MapGet  define a rota principal do site e o código que será executado quando ela for acessada.

O HTML   é criado dentro do código e retornado como resposta.

Results.Content     envia o HTML ao navegador.

Run     inicia o servidor e mantém a aplicação em execução.

Conclusão

Esse código representa a estrutura mínima de um projeto ASP.NET Core utilizando o modelo Minimal API.
Mesmo sendo simples, ele já mostra os principais conceitos da plataforma:

O ASP.NET Core trabalha com rotas, onde cada rota pode responder de forma diferente.

É possível retornar qualquer tipo de dado: HTML, texto simples, JSON ou arquivos.

A aplicação é auto-hospedada, ou seja, não depende de outro servidor web (como IIS) para funcionar.

O modelo Minimal API é ideal para testes, aprendizado e pequenas aplicações.